<!DOCTYPE html>
<html lang="en"><head>
<script src="Project Management_files/libs/clipboard/clipboard.min.js"></script>
<script src="Project Management_files/libs/quarto-html/tabby.min.js"></script>
<script src="Project Management_files/libs/quarto-html/popper.min.js"></script>
<script src="Project Management_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="Project Management_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Project Management_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="Project Management_files/libs/quarto-html/quarto-syntax-highlighting-dark-8ea72dc5fed832574809a9c94082fbbb.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.40">

  <meta name="author" content="MultnomR CoP">
  <title>Setting Up a Reproducible R Analysis Environment</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="Project Management_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="Project Management_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #f8f8f2;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #f8f8f2; } /* Normal */
    code span.al { color: #f07178; background-color: #2a0f15; font-weight: bold; } /* Alert */
    code span.an { color: #d4d0ab; } /* Annotation */
    code span.at { color: #00e0e0; } /* Attribute */
    code span.bn { color: #d4d0ab; } /* BaseN */
    code span.bu { color: #abe338; } /* BuiltIn */
    code span.cf { color: #ffa07a; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #abe338; } /* Char */
    code span.cn { color: #ffd700; } /* Constant */
    code span.co { color: #f8f8f2; font-style: italic; } /* Comment */
    code span.cv { color: #ffd700; } /* CommentVar */
    code span.do { color: #f8f8f2; } /* Documentation */
    code span.dt { color: #ffa07a; } /* DataType */
    code span.dv { color: #d4d0ab; } /* DecVal */
    code span.er { color: #f07178; text-decoration: underline; } /* Error */
    code span.ex { color: #00e0e0; font-weight: bold; } /* Extension */
    code span.fl { color: #d4d0ab; } /* Float */
    code span.fu { color: #ffa07a; } /* Function */
    code span.im { color: #abe338; } /* Import */
    code span.in { color: #d4d0ab; } /* Information */
    code span.kw { color: #ffa07a; font-weight: bold; } /* Keyword */
    code span.op { color: #ffa07a; } /* Operator */
    code span.ot { color: #00e0e0; } /* Other */
    code span.pp { color: #dcc6e0; } /* Preprocessor */
    code span.re { color: #00e0e0; background-color: #f8f8f2; } /* RegionMarker */
    code span.sc { color: #abe338; } /* SpecialChar */
    code span.ss { color: #abe338; } /* SpecialString */
    code span.st { color: #abe338; } /* String */
    code span.va { color: #00e0e0; } /* Variable */
    code span.vs { color: #abe338; } /* VerbatimString */
    code span.wa { color: #dcc6e0; } /* Warning */
  </style>
  <link rel="stylesheet" href="Project Management_files/libs/revealjs/dist/theme/quarto-09827916d029046395624718cea9abcf.css">
  <link href="Project Management_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="Project Management_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="Project Management_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="Project Management_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-dark">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Setting Up a Reproducible R Analysis Environment</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
MultnomR CoP 
</div>
</div>
</div>

</section>
<section id="the-importance-of-structure" class="slide level2">
<h2>The Importance of Structure</h2>
<ul>
<li>Why is project structure important for reproducible research?
<ul>
<li>Organization: Makes it easy to find files and understand the project.</li>
<li>Reproducibility: Ensures others (and your future self) can easily run your code.</li>
<li>Collaboration: Facilitates teamwork.</li>
</ul></li>
</ul>
<aside class="notes">
<p>Remind audience about the “R for the Rest of Us” blog post that inspired this. Briefly mention the benefits of each point.</p>
<ul>
<li><p><strong>Organization:</strong> Imagine trying to find a specific file in a project with hundreds of scripts and datasets scattered haphazardly. A well-defined structure eliminates this headache. It makes your project easy to navigate, both for you and anyone else who might need to work with it.</p></li>
<li><p><strong>Reproducibility:</strong> This is the cornerstone of good research. If you can’t reproduce your results, your work is, well, not very useful. A clear project structure makes it much easier for someone (including your future self!) to understand the steps you took and replicate your analysis. It removes ambiguity and prevents errors caused by incorrect file paths or missing dependencies.</p></li>
<li><p><strong>Collaboration:</strong> If you’re working on a team, a shared project structure is essential. It ensures everyone is on the same page and can easily find the files they need. This avoids confusion and streamlines the collaborative process.</p></li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="the-importance-of-structure-1" class="slide level2">
<h2>The Importance of Structure</h2>
<ul>
<li>We’ll walk through a practical example, covering:
<ul>
<li>Project setup with <code>here</code></li>
<li>Package management with <code>pacman</code></li>
<li>Global parameters and API keys</li>
<li>Reproducibility best practices</li>
</ul></li>
</ul>
<aside class="notes">
<p>Remind audience about the “R for the Rest of Us” blog post that inspired this. Briefly mention the benefits of each point.</p>
<ul>
<li><p><strong>Organization:</strong> Imagine trying to find a specific file in a project with hundreds of scripts and datasets scattered haphazardly. A well-defined structure eliminates this headache. It makes your project easy to navigate, both for you and anyone else who might need to work with it.</p></li>
<li><p><strong>Reproducibility:</strong> This is the cornerstone of good research. If you can’t reproduce your results, your work is, well, not very useful. A clear project structure makes it much easier for someone (including your future self!) to understand the steps you took and replicate your analysis. It removes ambiguity and prevents errors caused by incorrect file paths or missing dependencies.</p></li>
<li><p><strong>Collaboration:</strong> If you’re working on a team, a shared project structure is essential. It ensures everyone is on the same page and can easily find the files they need. This avoids confusion and streamlines the collaborative process.</p></li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="project-setup-with-here" class="slide level2">
<h2>Project Setup with <code>here</code></h2>
<ul>
<li>The <code>here</code> package: A powerful tool for managing file paths.</li>
<li>Why use <code>here</code>?
<ul>
<li>Avoids hardcoded paths, making your project portable.</li>
<li>Ensures consistent file referencing across different systems.</li>
</ul></li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href=""></a><span class="fu">require</span>(here)</span>
<span id="cb1-2"><a href=""></a>here<span class="sc">::</span><span class="fu">i_am</span>(<span class="st">"_archive/_anchor.R"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<aside class="notes">
<ul>
<li>Demonstration:
<ul>
<li><code>here::i_am("_archive/_anchor.R")</code> - Anchors the project root.</li>
<li>All other file paths are relative to this anchor.</li>
</ul></li>
<li>Show file structure diagram (e.g., using <code>tree</code> output or a visual representation).</li>
<li>Show an example of a hardcoded path vs.&nbsp;using here(). Emphasize the portability advantage. Mention the _anchor.R file and its purpose.</li>
</ul>
<p>Let’s dive into the practical side of project setup, starting with the <code>here</code> package. This is a fantastic tool for managing file paths within your project. The key idea behind <code>here</code> is to avoid hardcoding file paths, which can be a real source of problems when you move your project to a different computer or share it with someone else.</p>
<p>The core of <code>here</code> is the <code>i_am()</code> function. In our project, we use <code>here::i_am("_archive/_anchor.R")</code>. This line essentially tells <code>here</code> where the root of your project is located. Think of it as setting an anchor point. The <code>_archive/_anchor.R</code> file itself can be a very simple, even empty file. Its sole purpose is to serve as this anchor.</p>
<p>(Show a file structure diagram – either a visual one or the output of the <code>tree</code> command in your terminal. Point to the <code>_archive/_anchor.R</code> file in the diagram).</p>
<p>As you can see in the diagram, all other file paths in our project are defined <em>relative</em> to this anchor. So, instead of writing something like <code>/Users/yourname/projects/myproject/data/data.csv</code>, we would use <code>here("data", "data.csv")</code>.</p>
<p>(Show a slide with an example of a hardcoded path versus the <code>here()</code> approach).</p>
<p>This <code>here()</code> approach has two huge advantages. First, it makes your code much more readable and easier to understand. Second, and even more importantly, it makes your project portable. You can move it anywhere, and as long as the relative paths within your project remain the same, your code will still work perfectly. No more having to manually update dozens of file paths!</p>
<p>This is why <code>here</code> is so crucial for reproducible research. It ensures that your project can be easily shared and run by others, regardless of their file system structure.”</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="project-setup-with-here-1" class="slide level2">
<h2>Project Setup with <code>here</code></h2>
<p><img data-src="_images/file_structure_1.png"></p>
<aside class="notes">
<p>(Show a file structure diagram – either a visual one or the output of the <code>tree</code> command in your terminal. Point to the <code>_archive/_anchor.R</code> file in the diagram).</p>
<p>As you can see in the diagram, all other file paths in our project are defined <em>relative</em> to this anchor. So, instead of writing something like <code>/Users/yourname/projects/myproject/data/data.csv</code>, we would use <code>here("data", "data.csv")</code>.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="project-setup-with-here-2" class="slide level2">
<h2>Project Setup with <code>here</code></h2>
<p><img data-src="_images/anchor_R.png"></p>
</section>
<section id="project-setup-with-here-3" class="slide level2">
<h2>Project Setup with <code>here</code></h2>
<p><strong>Hardcoded Path:</strong></p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href=""></a><span class="co"># This is fragile and not portable!</span></span>
<span id="cb2-2"><a href=""></a>data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"/Users/yourname/Documents/myproject/data/data.csv"</span>) </span>
<span id="cb2-3"><a href=""></a><span class="fu">here</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong><code>here()</code> Path:</strong></p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href=""></a><span class="co"># This is robust and portable!</span></span>
<span id="cb3-2"><a href=""></a>data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"data.csv"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<aside class="notes">
<p>Let’s look at a concrete example of why hardcoded paths are problematic and how <code>here</code> solves this.</p>
<p>(Point to the hardcoded path example)</p>
<p>This first line of code uses a hardcoded path to read a CSV file. It specifies the absolute path to the file, starting from the root directory. This works fine on <em>your</em> computer, but what happens if you share this code with someone else, or if you move your project to a different computer? The path will likely be different, and the code will break.</p>
<p>(Point to the <code>here()</code> path example)</p>
<p>This second line of code uses the <code>here()</code> function to construct the path. It specifies the path relative to the project root, which we defined earlier using <code>here::i_am()</code>. This means that no matter where your project is located, the code will always find the correct file.</p>
<p>This simple change makes your code much more robust and portable. It’s a key step in ensuring that your analysis can be easily reproduced by others, regardless of their file system structure.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="package-management-with-pacman" class="slide level2">
<h2>Package Management with <code>pacman</code></h2>
<ul>
<li>The <code>pacman</code> package: Streamlines package installation and loading.</li>
<li>Benefits of <code>pacman</code>:
<ul>
<li>Easy installation: <code>p_install()</code></li>
<li>Efficient loading: <code>p_load()</code> - Installs if needed, loads if already installed.</li>
<li>Conflict management.</li>
</ul></li>
</ul>
<aside class="notes">
<ul>
<li>Show your <code>packages.R</code> script. Highlight key sections:
<ul>
<li><code>p_load()</code> for core packages, tidyverse, spatial analysis, etc.</li>
<li><code>p_load_gh()</code> for packages from GitHub.</li>
<li><code>conflicts_prefer()</code> for resolving function name conflicts.</li>
</ul></li>
<li>Emphasize the organization of your packages by category (core, data manipulation, visualization, etc.).</li>
<li>Explain why categorizing packages is helpful. Mention the CRAN and GitHub package sources. Explain why resolving conflicts is important.</li>
</ul>
<p>Now, let’s talk about managing R packages, which are essential for extending R’s capabilities. We use the <code>pacman</code> package for this, and it makes the whole process much smoother. <code>pacman</code> provides functions like <code>p_install()</code> for installing packages and <code>p_load()</code> for loading them. The beauty of <code>p_load()</code> is that it’s smart: if a package isn’t installed, it will install it, and if it’s already installed, it will simply load it.</p>
<p>(Show your <code>packages.R</code> script on the screen. You might want to use a code chunk with <code>knitr::read_chunk()</code> to embed the script directly in your presentation, or simply have it open in your editor and switch to it during the presentation).</p>
<p>As you can see, our <code>packages.R</code> script is organized into sections. This is a deliberate choice. We’ve grouped our packages by category: core packages, data manipulation packages, visualization packages, and so on. This categorization is incredibly helpful for a few reasons. First, it makes it easier to find the packages you need. Second, it helps you understand the dependencies between packages. For example, you know that all the packages in the “Data Manipulation” section are likely used together for data cleaning and transformation.</p>
<p>Within each section, we use <code>p_load()</code> to load the packages. For instance, we load the entire tidyverse suite, which includes <code>dplyr</code>, <code>tidyr</code>, <code>ggplot2</code>, and other essential packages, all with a single line. We also have sections for spatial analysis packages, time series packages, and so on.</p>
<p>You’ll also notice the <code>p_load_gh()</code> function. This is how we install packages directly from GitHub. This is useful for packages that are still in development or not yet available on CRAN, the Comprehensive R Archive Network, which is the main repository for R packages. So, <code>p_load()</code> handles packages from CRAN, and <code>p_load_gh()</code> handles packages from GitHub.</p>
<p>Finally, we have the <code>conflicts_prefer()</code> function. This is crucial for resolving function name conflicts. Sometimes, two different packages might have functions with the same name. This can lead to unexpected behavior. <code>conflicts_prefer()</code> allows you to specify which package’s function you want to use in case of a conflict, ensuring your code works as intended. This is a very important step for maintaining code clarity and avoiding errors.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="package-management-with-pacman-1" class="slide level2">
<h2>Package Management with <code>pacman</code></h2>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href=""></a><span class="co"># Project/Script Title: Loading R Packages for Vital Records Processing</span></span>
<span id="cb4-2"><a href=""></a><span class="co"># Author: N.F. Parsons</span></span>
<span id="cb4-3"><a href=""></a><span class="co"># Date Created: 2025-02-05</span></span>
<span id="cb4-4"><a href=""></a><span class="co"># Email: nathan.parsons@multco.us</span></span>
<span id="cb4-5"><a href=""></a><span class="co"># Description: This script loads all necessary R packages for processing vital records data.</span></span>
<span id="cb4-6"><a href=""></a></span>
<span id="cb4-7"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb4-8"><a href=""></a><span class="co"># 1. Setup/Dependencies (Package Manager)</span></span>
<span id="cb4-9"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb4-10"><a href=""></a></span>
<span id="cb4-11"><a href=""></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">"pacman"</span>)) {</span>
<span id="cb4-12"><a href=""></a>  <span class="fu">install.packages</span>(<span class="st">"pacman"</span>, <span class="at">repos =</span> <span class="st">"https://cran.rstudio.org"</span>)</span>
<span id="cb4-13"><a href=""></a>}</span>
<span id="cb4-14"><a href=""></a><span class="fu">library</span>(pacman)</span>
<span id="cb4-15"><a href=""></a></span>
<span id="cb4-16"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb4-17"><a href=""></a><span class="co"># 2. Package Loading (Streamlined and Reorganized)</span></span>
<span id="cb4-18"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb4-19"><a href=""></a></span>
<span id="cb4-20"><a href=""></a><span class="co"># Core/Essential Packages (General R use)</span></span>
<span id="cb4-21"><a href=""></a><span class="fu">p_load</span>(</span>
<span id="cb4-22"><a href=""></a>  here,          <span class="co"># Folder/file management</span></span>
<span id="cb4-23"><a href=""></a>  conflicted,    <span class="co"># Package conflict management</span></span>
<span id="cb4-24"><a href=""></a>  english,       <span class="co"># Translate integers into text</span></span>
<span id="cb4-25"><a href=""></a>  labelled,      <span class="co"># Manipulate variable/value metadata</span></span>
<span id="cb4-26"><a href=""></a>  rlang,         <span class="co"># Functions for base R and tidyverse features</span></span>
<span id="cb4-27"><a href=""></a>  xfun,          <span class="co"># Miscellaneous functions</span></span>
<span id="cb4-28"><a href=""></a>  rio,           <span class="co"># Universal import/export</span></span>
<span id="cb4-29"><a href=""></a>  archive,       <span class="co"># Archive files</span></span>
<span id="cb4-30"><a href=""></a>  filesstrings,  <span class="co"># String manipulation</span></span>
<span id="cb4-31"><a href=""></a>  googledrive,   <span class="co"># Interact with Google Drive</span></span>
<span id="cb4-32"><a href=""></a>  knitr          <span class="co"># Dynamic report generation</span></span>
<span id="cb4-33"><a href=""></a>)</span>
<span id="cb4-34"><a href=""></a></span>
<span id="cb4-35"><a href=""></a><span class="co"># Data Manipulation and Transformation (Tidyverse first, then others)</span></span>
<span id="cb4-36"><a href=""></a><span class="fu">p_load</span>(</span>
<span id="cb4-37"><a href=""></a>  tidyverse,      <span class="co"># Tidy data handling and analysis (includes dplyr, tidyr, ggplot2, etc.)</span></span>
<span id="cb4-38"><a href=""></a>  janitor,       <span class="co"># Data cleaning and examination</span></span>
<span id="cb4-39"><a href=""></a>  bestNormalize, <span class="co"># Data normalization</span></span>
<span id="cb4-40"><a href=""></a>  mice,          <span class="co"># Multivariate imputation</span></span>
<span id="cb4-41"><a href=""></a>  anesrake,      <span class="co"># ANES Raking</span></span>
<span id="cb4-42"><a href=""></a>  skimr          <span class="co"># Summary statistics</span></span>
<span id="cb4-43"><a href=""></a>)</span>
<span id="cb4-44"><a href=""></a></span>
<span id="cb4-45"><a href=""></a><span class="co"># Tables</span></span>
<span id="cb4-46"><a href=""></a><span class="fu">p_load</span>(</span>
<span id="cb4-47"><a href=""></a>  gt,            <span class="co"># Presentation-ready tables</span></span>
<span id="cb4-48"><a href=""></a>  gtsummary,     <span class="co"># Publication-ready tables</span></span>
<span id="cb4-49"><a href=""></a>  flextable      <span class="co"># MS Office compatible tables</span></span>
<span id="cb4-50"><a href=""></a>)</span>
<span id="cb4-51"><a href=""></a></span>
<span id="cb4-52"><a href=""></a><span class="co"># Spatial Analysis (sf preferred, then others)</span></span>
<span id="cb4-53"><a href=""></a><span class="fu">p_load</span>(</span>
<span id="cb4-54"><a href=""></a>  sf,            <span class="co"># Simple features (primary spatial package)</span></span>
<span id="cb4-55"><a href=""></a>  tidycensus,    <span class="co"># US Census data</span></span>
<span id="cb4-56"><a href=""></a>  tidygeocoder,  <span class="co"># Geocoding</span></span>
<span id="cb4-57"><a href=""></a>  geojsonio,     <span class="co"># GeoJSON/TopoJSON conversion</span></span>
<span id="cb4-58"><a href=""></a>  tmap,          <span class="co"># Thematic maps</span></span>
<span id="cb4-59"><a href=""></a>  tmaptools,     <span class="co"># Thematic map tools</span></span>
<span id="cb4-60"><a href=""></a>  osmdata,       <span class="co"># OpenStreetMap data</span></span>
<span id="cb4-61"><a href=""></a>  <span class="co"># ggmap,       # Spatial visualization (Consider if needed with tmap)</span></span>
<span id="cb4-62"><a href=""></a>  maps           <span class="co"># Draw geographical maps (Consider if needed with sf/tmap)</span></span>
<span id="cb4-63"><a href=""></a>)</span>
<span id="cb4-64"><a href=""></a></span>
<span id="cb4-65"><a href=""></a><span class="co"># Time Series</span></span>
<span id="cb4-66"><a href=""></a><span class="fu">p_load</span>(</span>
<span id="cb4-67"><a href=""></a>  xts,           <span class="co"># Extensible time series</span></span>
<span id="cb4-68"><a href=""></a>  spacetime,     <span class="co"># Spatio-temporal data</span></span>
<span id="cb4-69"><a href=""></a>  tsibble,       <span class="co"># Tidy temporal data frames</span></span>
<span id="cb4-70"><a href=""></a>  slider,        <span class="co"># Sliding window functions</span></span>
<span id="cb4-71"><a href=""></a>  imputeTS,      <span class="co"># Time series imputation</span></span>
<span id="cb4-72"><a href=""></a>  feasts,        <span class="co"># Time series feature extraction</span></span>
<span id="cb4-73"><a href=""></a>  forecast,      <span class="co"># Time series forecasting</span></span>
<span id="cb4-74"><a href=""></a>  trending,      <span class="co"># Trending analysis</span></span>
<span id="cb4-75"><a href=""></a>  tibbletime     <span class="co"># Time-aware tibbles</span></span>
<span id="cb4-76"><a href=""></a>)</span>
<span id="cb4-77"><a href=""></a></span>
<span id="cb4-78"><a href=""></a><span class="co"># Visualization (ggplot2 related first)</span></span>
<span id="cb4-79"><a href=""></a><span class="fu">p_load</span>(</span>
<span id="cb4-80"><a href=""></a>  scales,        <span class="co"># Graphical scales (often used with ggplot2)</span></span>
<span id="cb4-81"><a href=""></a>  showtext,      <span class="co"># Easy font use in plots</span></span>
<span id="cb4-82"><a href=""></a>  patchwork,     <span class="co"># Plot composition</span></span>
<span id="cb4-83"><a href=""></a>  ggpp,          <span class="co"># ggplot2 extensions</span></span>
<span id="cb4-84"><a href=""></a>  ggExtra,       <span class="co"># ggplot2 enhancements</span></span>
<span id="cb4-85"><a href=""></a>  ggalt,         <span class="co"># Extra ggplot2 geoms/stats</span></span>
<span id="cb4-86"><a href=""></a>  ggpubr,        <span class="co"># Easy plot creation</span></span>
<span id="cb4-87"><a href=""></a>  ggridges,      <span class="co"># Ridgeline plots</span></span>
<span id="cb4-88"><a href=""></a>  ggfittext,     <span class="co"># Improved text rendering</span></span>
<span id="cb4-89"><a href=""></a>  ggtext,         <span class="co"># Improved text rendering</span></span>
<span id="cb4-90"><a href=""></a>  ggthemes,       <span class="co"># ggplot2 themes</span></span>
<span id="cb4-91"><a href=""></a>  ggsci,          <span class="co"># ggplot2 color palettes</span></span>
<span id="cb4-92"><a href=""></a>  hrbrthemes,     <span class="co"># ggplot2 themes</span></span>
<span id="cb4-93"><a href=""></a>  viridis         <span class="co"># ggplot2 color palettes</span></span>
<span id="cb4-94"><a href=""></a>)</span>
<span id="cb4-95"><a href=""></a></span>
<span id="cb4-96"><a href=""></a><span class="co"># Visualization (GitHub)</span></span>
<span id="cb4-97"><a href=""></a><span class="fu">p_load_gh</span>(</span>
<span id="cb4-98"><a href=""></a>  <span class="st">"AliciaSchep/gglabeller"</span>,  <span class="co"># Easy plot labeling</span></span>
<span id="cb4-99"><a href=""></a>  <span class="st">"MarcellGranat/ggProfessional"</span>, <span class="co"># Professional ggplot2</span></span>
<span id="cb4-100"><a href=""></a>  <span class="st">"mattcowgill/ggannotate"</span>  <span class="co"># Easy plot annotation</span></span>
<span id="cb4-101"><a href=""></a>)</span>
<span id="cb4-102"><a href=""></a></span>
<span id="cb4-103"><a href=""></a><span class="co"># Visualization (Other)</span></span>
<span id="cb4-104"><a href=""></a><span class="fu">p_load</span>(</span>
<span id="cb4-105"><a href=""></a>  <span class="co"># extrafont,  # Font tools (Consider if needed with showtext)</span></span>
<span id="cb4-106"><a href=""></a>  magick,        <span class="co"># Image processing (Consider if actively used)</span></span>
<span id="cb4-107"><a href=""></a>  xkcd,          <span class="co"># xkcd theme (Consider if actively used)</span></span>
<span id="cb4-108"><a href=""></a>  harrypotter    <span class="co"># Harry Potter theme (Consider if actively used)</span></span>
<span id="cb4-109"><a href=""></a>)</span>
<span id="cb4-110"><a href=""></a></span>
<span id="cb4-111"><a href=""></a><span class="co"># Compatibility &amp; Other</span></span>
<span id="cb4-112"><a href=""></a><span class="fu">p_load</span>(</span>
<span id="cb4-113"><a href=""></a>  officedown,    <span class="co"># Microsoft Office compatibility</span></span>
<span id="cb4-114"><a href=""></a>  DBI,          <span class="co"># Database interaction</span></span>
<span id="cb4-115"><a href=""></a>  units,         <span class="co"># Measurement units</span></span>
<span id="cb4-116"><a href=""></a>  yardstick,     <span class="co"># Model metrics</span></span>
<span id="cb4-117"><a href=""></a>  surveillance   <span class="co"># Epidemic modeling</span></span>
<span id="cb4-118"><a href=""></a>)</span>
<span id="cb4-119"><a href=""></a></span>
<span id="cb4-120"><a href=""></a></span>
<span id="cb4-121"><a href=""></a></span>
<span id="cb4-122"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb4-123"><a href=""></a><span class="co"># 3. Conflict Resolution (After loading)</span></span>
<span id="cb4-124"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb4-125"><a href=""></a></span>
<span id="cb4-126"><a href=""></a><span class="fu">conflicts_prefer</span>(</span>
<span id="cb4-127"><a href=""></a>  dplyr<span class="sc">::</span>filter, </span>
<span id="cb4-128"><a href=""></a>  dplyr<span class="sc">::</span>summarize, </span>
<span id="cb4-129"><a href=""></a>  dplyr<span class="sc">::</span>select, </span>
<span id="cb4-130"><a href=""></a>  janitor<span class="sc">::</span>clean_names</span>
<span id="cb4-131"><a href=""></a>)</span>
<span id="cb4-132"><a href=""></a></span>
<span id="cb4-133"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb4-134"><a href=""></a><span class="co"># 4. Session Information</span></span>
<span id="cb4-135"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb4-136"><a href=""></a></span>
<span id="cb4-137"><a href=""></a><span class="fu">sessionInfo</span>()</span>
<span id="cb4-138"><a href=""></a></span>
<span id="cb4-139"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb4-140"><a href=""></a><span class="co"># 5. Confirmation output</span></span>
<span id="cb4-141"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb4-142"><a href=""></a></span>
<span id="cb4-143"><a href=""></a><span class="fu">str_glue</span>(<span class="st">"Packages loaded. </span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb4-144"><a href=""></a></span>
<span id="cb4-145"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb4-146"><a href=""></a><span class="co"># End of Script</span></span>
<span id="cb4-147"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="global-parameters-and-api-keys" class="slide level2">
<h2>Global Parameters and API Keys</h2>
<ul>
<li>The <code>global_parameters.R</code> script: Centralized location for settings.</li>
<li>Key elements:
<ul>
<li>API keys: Stored as environment variables for security. <strong>Never</strong> hardcode API keys directly in your scripts.</li>
<li>File paths: <code>gis_repo</code>, <code>data_repo</code> - Again, ideally from environment variables.</li>
<li>Random seed: <code>set.seed(13)</code> - Essential for reproducibility.</li>
<li><code>gtsummary</code> and <code>flextable</code> defaults.</li>
<li>Font loading with <code>showtext</code>.</li>
</ul></li>
</ul>
<aside class="notes">
<p>Show the code and explain each section. Stress the importance of environment variables for API keys. Explain the purpose of each global parameter.</p>
<p>Now, let’s move on to the <code>global_parameters.R</code> script. This script acts as a central hub for all the settings that affect your R project. It’s where we define global parameters, manage API keys, and set options for things like table formatting and font loading.</p>
<p>(Show the <code>global_parameters.R</code> script on the screen, either embedded or by switching to your editor).</p>
<p>The most crucial part of this script, and something I want to emphasize strongly, is the handling of API keys. As you can see, we <em>never</em> store API keys directly in the script. Instead, we retrieve them from environment variables. This is absolutely essential for security. API keys are like passwords; you should never expose them in your code, especially if you’re sharing your project.</p>
<p>(Point to the lines where you retrieve API keys using <code>Sys.getenv()</code>).</p>
<p>We use <code>Sys.getenv()</code> to get the values of these environment variables. We also include checks to make sure the API keys are actually set. If they’re not, the script will stop with an error message, reminding you to set them. This is a good practice to prevent your code from running with missing or incorrect API keys.</p>
<p>Next, we define variables for important file paths: <code>gis_repo</code> and <code>data_repo</code>. These point to the directories where we store our GIS shapefiles and other data files, respectively. Like API keys, it’s best practice to store these as environment variables as well.</p>
<p>(Explain the purpose of each file path and how it’s used in your project).</p>
<p>We then set a random seed using <code>set.seed(13)</code>. This is vital for reproducibility. Setting a random seed ensures that if your code involves any random processes, like simulations or bootstrapping, you’ll get the same results every time you run it. This is essential for verifying your work and for others to reproduce your findings.</p>
<p>(Explain what <code>options(scipen = 9999)</code> does and why you set it. It controls scientific notation).</p>
<p>Finally, we configure the default themes for <code>gtsummary</code> and <code>flextable</code>, which are packages we use for creating publication-ready tables. This ensures consistency in our table formatting throughout the project. We also load fonts using <code>showtext::showtext_auto()</code>. This allows us to use custom fonts in our plots and tables.</p>
<p>By centralizing all these settings in one script, we make our project more organized, reproducible, and easier to manage. It also prevents us from having to repeat these settings in multiple scripts, reducing the risk of errors and inconsistencies.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="global-parameters-and-api-keys-1" class="slide level2">
<h2>Global Parameters and API Keys</h2>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href=""></a><span class="co"># Project/Script Title: Setting Global Parameters and Resolving Conflicts</span></span>
<span id="cb5-2"><a href=""></a><span class="co"># Author: N.F. Parsons</span></span>
<span id="cb5-3"><a href=""></a><span class="co"># Date: 2025-02-05</span></span>
<span id="cb5-4"><a href=""></a><span class="co"># Email: nathan.parsons@multco.us</span></span>
<span id="cb5-5"><a href=""></a><span class="co"># Description: This script sets global parameters, resolves conflicts between packages,</span></span>
<span id="cb5-6"><a href=""></a><span class="co">#              loads fonts, sets API keys, and sets a random seed for reproducibility.</span></span>
<span id="cb5-7"><a href=""></a></span>
<span id="cb5-8"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb5-9"><a href=""></a><span class="co"># 1. Setup/Dependencies</span></span>
<span id="cb5-10"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb5-11"><a href=""></a></span>
<span id="cb5-12"><a href=""></a><span class="co"># Install packages if not already installed (using a helper function)</span></span>
<span id="cb5-13"><a href=""></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">"pacman"</span>)) {</span>
<span id="cb5-14"><a href=""></a>  <span class="fu">install.packages</span>(<span class="st">"pacman"</span>, <span class="at">repos =</span> <span class="st">"https://cran.rstudio.org"</span>)</span>
<span id="cb5-15"><a href=""></a>}</span>
<span id="cb5-16"><a href=""></a><span class="fu">library</span>(pacman)</span>
<span id="cb5-17"><a href=""></a></span>
<span id="cb5-18"><a href=""></a><span class="fu">p_load</span>(<span class="st">"magick"</span>, <span class="st">"janitor"</span>, <span class="st">"dplyr"</span>, <span class="st">"tidycensus"</span>, <span class="st">"sysfonts"</span>, <span class="st">"rscopus"</span>, </span>
<span id="cb5-19"><a href=""></a>       <span class="st">"gtsummary"</span>, <span class="st">"flextable"</span>, <span class="st">"showtext"</span>, <span class="st">"ggmap"</span>, <span class="st">"stringr"</span>)</span>
<span id="cb5-20"><a href=""></a></span>
<span id="cb5-21"><a href=""></a></span>
<span id="cb5-22"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb5-23"><a href=""></a><span class="co"># 2. Global Parameters/Constants</span></span>
<span id="cb5-24"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb5-25"><a href=""></a></span>
<span id="cb5-26"><a href=""></a><span class="co"># API Keys (Store securely, ideally in environment variables)</span></span>
<span id="cb5-27"><a href=""></a>elsevier_api_key <span class="ot">&lt;-</span> <span class="fu">Sys.getenv</span>(<span class="st">"ELSEVIER_API_KEY"</span>)  <span class="co"># Get from environment</span></span>
<span id="cb5-28"><a href=""></a>census_api_key <span class="ot">&lt;-</span> <span class="fu">Sys.getenv</span>(<span class="st">"CENSUS_API_KEY"</span>) <span class="co"># Get from environment</span></span>
<span id="cb5-29"><a href=""></a>google_api_key <span class="ot">&lt;-</span> <span class="fu">Sys.getenv</span>(<span class="st">"GOOGLE_API_KEY"</span>) <span class="co"># Get from environment</span></span>
<span id="cb5-30"><a href=""></a></span>
<span id="cb5-31"><a href=""></a><span class="co"># Check if API keys are set (important for security)</span></span>
<span id="cb5-32"><a href=""></a><span class="cf">if</span> (elsevier_api_key <span class="sc">==</span> <span class="st">""</span>) {</span>
<span id="cb5-33"><a href=""></a>  <span class="fu">stop</span>(<span class="st">"Elsevier API key not found. Set the ELSEVIER_API_KEY environment variable."</span>)</span>
<span id="cb5-34"><a href=""></a>}</span>
<span id="cb5-35"><a href=""></a><span class="cf">if</span> (census_api_key <span class="sc">==</span> <span class="st">""</span>) {</span>
<span id="cb5-36"><a href=""></a>  <span class="fu">stop</span>(<span class="st">"Census API key not found. Set the CENSUS_API_KEY environment variable."</span>)</span>
<span id="cb5-37"><a href=""></a>}</span>
<span id="cb5-38"><a href=""></a><span class="cf">if</span> (google_api_key <span class="sc">==</span> <span class="st">""</span>) {</span>
<span id="cb5-39"><a href=""></a>  <span class="fu">stop</span>(<span class="st">"Google API key not found. Set the GOOGLE_API_KEY environment variable."</span>)</span>
<span id="cb5-40"><a href=""></a>}</span>
<span id="cb5-41"><a href=""></a></span>
<span id="cb5-42"><a href=""></a><span class="co"># GIS repo (set for your own use)</span></span>
<span id="cb5-43"><a href=""></a>gis_repo <span class="ot">&lt;-</span> <span class="fu">Sys.getenv</span>(<span class="st">"GIS_SHAPEFILE_REPO"</span>)</span>
<span id="cb5-44"><a href=""></a></span>
<span id="cb5-45"><a href=""></a><span class="co"># Check if GIS repo is set</span></span>
<span id="cb5-46"><a href=""></a><span class="cf">if</span> (gis_repo <span class="sc">==</span> <span class="st">""</span>) {</span>
<span id="cb5-47"><a href=""></a>  <span class="fu">stop</span>(<span class="st">"GIS shapefile repository not found. Set the GIS_SHAPEFILE_REPO environment variable using the following code: `gis_repo &lt;- 'path/to/shapefiles/folder', or add the following code to your .Rprofile using `file.edit(file.path('~', '.Rprofile'))`: `Sys.setenv(DATA_REPO = 'path/to/shapefiles/folder')`"</span>)</span>
<span id="cb5-48"><a href=""></a>}</span>
<span id="cb5-49"><a href=""></a></span>
<span id="cb5-50"><a href=""></a><span class="co"># Data repo (set for your own use)</span></span>
<span id="cb5-51"><a href=""></a>data_repo <span class="ot">&lt;-</span> <span class="fu">Sys.getenv</span>(<span class="st">"DATA_REPO"</span>)</span>
<span id="cb5-52"><a href=""></a></span>
<span id="cb5-53"><a href=""></a><span class="co"># Check if GIS repo is set</span></span>
<span id="cb5-54"><a href=""></a><span class="cf">if</span> (data_repo <span class="sc">==</span> <span class="st">""</span>) {</span>
<span id="cb5-55"><a href=""></a>  <span class="fu">stop</span>(<span class="st">"Data repository not found. Set the DATA_REPO environment variable using the following code: `data_repo &lt;- 'path/to/data/folder'`, or add the following code to your .Rprofile using `file.edit(file.path('~', '.Rprofile'))`: `Sys.setenv(DATA_REPO = 'path/to/data/folder')`"</span>)</span>
<span id="cb5-56"><a href=""></a>}</span>
<span id="cb5-57"><a href=""></a></span>
<span id="cb5-58"><a href=""></a><span class="co"># Other Global Settings</span></span>
<span id="cb5-59"><a href=""></a><span class="fu">set.seed</span>(<span class="dv">13</span>) <span class="co"># Random seed for reproducibility</span></span>
<span id="cb5-60"><a href=""></a><span class="fu">options</span>(<span class="at">scipen =</span> <span class="dv">9999</span>) <span class="co"># Large number for scientific notation preference</span></span>
<span id="cb5-61"><a href=""></a></span>
<span id="cb5-62"><a href=""></a></span>
<span id="cb5-63"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb5-64"><a href=""></a><span class="co"># 3. Themes and Table Defaults</span></span>
<span id="cb5-65"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb5-66"><a href=""></a></span>
<span id="cb5-67"><a href=""></a><span class="co"># gtsummary Themes</span></span>
<span id="cb5-68"><a href=""></a>gtsummary<span class="sc">::</span><span class="fu">theme_gtsummary_journal</span>(<span class="at">journal =</span> <span class="st">"jama"</span>)</span>
<span id="cb5-69"><a href=""></a>gtsummary<span class="sc">::</span><span class="fu">theme_gtsummary_compact</span>()</span>
<span id="cb5-70"><a href=""></a></span>
<span id="cb5-71"><a href=""></a><span class="co"># flextable Defaults (Font check!)</span></span>
<span id="cb5-72"><a href=""></a>flextable<span class="sc">::</span><span class="fu">set_flextable_defaults</span>(</span>
<span id="cb5-73"><a href=""></a>  <span class="at">table.layout =</span> <span class="st">"autofit"</span>, </span>
<span id="cb5-74"><a href=""></a>  <span class="at">font.size =</span> <span class="dv">10</span>, </span>
<span id="cb5-75"><a href=""></a>  <span class="at">font.family =</span> <span class="st">"Times New Roman"</span>, <span class="co"># Ensure this font is available!</span></span>
<span id="cb5-76"><a href=""></a>  <span class="at">padding.top =</span> <span class="dv">0</span>, </span>
<span id="cb5-77"><a href=""></a>  <span class="at">padding.bottom =</span> <span class="dv">0</span></span>
<span id="cb5-78"><a href=""></a>)</span>
<span id="cb5-79"><a href=""></a></span>
<span id="cb5-80"><a href=""></a></span>
<span id="cb5-81"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb5-82"><a href=""></a><span class="co"># 4. Font Loading</span></span>
<span id="cb5-83"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb5-84"><a href=""></a></span>
<span id="cb5-85"><a href=""></a><span class="co"># Enable showtext for custom fonts</span></span>
<span id="cb5-86"><a href=""></a>showtext<span class="sc">::</span><span class="fu">showtext_auto</span>() </span>
<span id="cb5-87"><a href=""></a></span>
<span id="cb5-88"><a href=""></a></span>
<span id="cb5-89"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb5-90"><a href=""></a><span class="co"># 5. API Key Registration</span></span>
<span id="cb5-91"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb5-92"><a href=""></a></span>
<span id="cb5-93"><a href=""></a><span class="co"># Register API keys (after setting them as environment variables)</span></span>
<span id="cb5-94"><a href=""></a></span>
<span id="cb5-95"><a href=""></a><span class="co"># tidycensus</span></span>
<span id="cb5-96"><a href=""></a>tidycensus<span class="sc">::</span><span class="fu">census_api_key</span>(census_api_key, <span class="at">overwrite =</span> <span class="cn">TRUE</span>) </span>
<span id="cb5-97"><a href=""></a></span>
<span id="cb5-98"><a href=""></a><span class="co"># Elsevier </span></span>
<span id="cb5-99"><a href=""></a>rscopus<span class="sc">::</span><span class="fu">set_api_key</span>(elsevier_api_key)  </span>
<span id="cb5-100"><a href=""></a></span>
<span id="cb5-101"><a href=""></a><span class="co"># Google Maps </span></span>
<span id="cb5-102"><a href=""></a>ggmap<span class="sc">::</span><span class="fu">register_google</span>(<span class="at">key =</span> google_api_key) </span>
<span id="cb5-103"><a href=""></a></span>
<span id="cb5-104"><a href=""></a></span>
<span id="cb5-105"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb5-106"><a href=""></a><span class="co"># 6.  Session Information</span></span>
<span id="cb5-107"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb5-108"><a href=""></a></span>
<span id="cb5-109"><a href=""></a><span class="fu">sessionInfo</span>()</span>
<span id="cb5-110"><a href=""></a></span>
<span id="cb5-111"><a href=""></a></span>
<span id="cb5-112"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb5-113"><a href=""></a><span class="co"># 7. Confirmation output</span></span>
<span id="cb5-114"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb5-115"><a href=""></a></span>
<span id="cb5-116"><a href=""></a>stringr<span class="sc">::</span><span class="fu">str_glue</span>(<span class="st">"Options set. </span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb5-117"><a href=""></a></span>
<span id="cb5-118"><a href=""></a></span>
<span id="cb5-119"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb5-120"><a href=""></a><span class="co"># End of Script</span></span>
<span id="cb5-121"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="api-key-management-environment-variables" class="slide level2">
<h2>API Key Management (Environment Variables)</h2>
<ul>
<li>Why environment variables?
<ul>
<li>Security: Keeps sensitive keys out of your code.</li>
<li>Flexibility: Easily change keys without modifying scripts.</li>
</ul></li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href=""></a>census_api_key <span class="ot">&lt;-</span> <span class="fu">Sys.getenv</span>(<span class="st">"CENSUS_API_KEY"</span>)</span>
<span id="cb6-2"><a href=""></a><span class="cf">if</span> (census_api_key <span class="sc">==</span> <span class="st">""</span>) {</span>
<span id="cb6-3"><a href=""></a>  <span class="fu">print</span>(<span class="st">"Census API key not found."</span>) <span class="co"># Don't stop in the presentation!</span></span>
<span id="cb6-4"><a href=""></a>} <span class="cf">else</span> {</span>
<span id="cb6-5"><a href=""></a>    <span class="fu">print</span>(<span class="st">"Census API key found."</span>)</span>
<span id="cb6-6"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<aside class="notes">
<p>Give specific instructions for setting environment variables on different operating systems. Explain the <code>.Renviron</code> file.</p>
<p>Now let’s talk about setting environment variables. These are essentially variables that exist outside of your R scripts and can be accessed by the R session. They’re perfect for storing sensitive information like API keys, file paths, and other global settings.</p>
<p>There are several ways to set environment variables, depending on your operating system:</p>
<ul>
<li><p>Unix-based Systems (Linux, macOS, etc.):</p>
<ul>
<li><p>Terminal: Simply type the following command, replacing KEY_NAME with your desired variable name and YOUR_VALUE with your desired value: <code>export KEY_NAME=YOUR_VALUE</code></p></li>
<li><p>.Renviron file: Create a file named .Renviron in your home directory (~/) or project directory. Add your environment variables in the format KEY_NAME=YOUR_VALUE, one per line. For example: <code>WEATHER_API_KEY=your_actual_api_key; MY_DATA_DIR=/path/to/my/data</code></p></li>
<li><p>Environment variables are automatically set when you open a terminal in that directory or when you start RStudio.</p></li>
</ul></li>
<li><p>Windows:</p>
<ul>
<li><p>Command Prompt: Use the set command with the same syntax as in Unix-based systems: <code>set KEY_NAME=YOUR_VALUE</code></p></li>
<li><p>Environment Variables dialog: Right-click on the My Computer icon, select Properties, then Advanced System Settings, and then Environment Variables. Here you can add, edit, or delete environment variables.</p></li>
<li><p>.Renviron file: Create a file named .Renviron in your home directory (usually C:%username%) or project directory. Add your environment variables in the format KEY_NAME=YOUR_VALUE, one per line. Note that Windows might not automatically load .Renviron files by default. You may need to enable it in the Environment Variables dialog.</p></li>
</ul></li>
</ul>
<p>Advantages of using .Renviron:</p>
<pre><code>*   Security: Storing API keys and other sensitive information in .Renviron keeps them out of your R scripts, reducing the risk of accidental exposure.

*   Portability: Environment variables set in .Renviron are available in all your R sessions on that machine, regardless of the specific directory you're working in.

*   Organization: It keeps your environment variable definitions in a single, dedicated file, making them easier to manage.

*   Important Note: Remember to restart your R session after making changes to your .Renviron file for the new environment variables to take effect.</code></pre>
<p>Let’s summarize:</p>
<p>Use .Renviron for storing sensitive environment variables like API keys. Set environment variables using the appropriate commands for your operating system. Restart your R session after making changes to .Renviron for them to take effect. By using .Renviron, you can keep your R projects secure, organized, and portable. It’s a good practice to adopt, especially when working with sensitive data or APIs.</p>
<p>Here’s a breakdown of why .Renviron is generally preferred over .Rprofile for storing environment variables, especially API keys and other sensitive information:</p>
<ol type="1">
<li>Security:</li>
</ol>
<ul>
<li><p>.Renviron: The .Renviron file is specifically designed for storing environment variables. It’s typically read very early in the R session startup process, before your R scripts are executed. This means that environment variables set in .Renviron are available to your R session, but the .Renviron file itself is usually not directly accessible from within your R scripts. This adds a layer of security, as it makes it harder for someone to accidentally print or expose the contents of your .Renviron file (and thus your API keys) while running your code.</p></li>
<li><p>.Rprofile: The .Rprofile file, on the other hand, is executed as R starts. While you can set environment variables in .Rprofile using Sys.setenv(), the file itself is just regular R code. This means that the .Rprofile file could be inadvertently read or processed by your R scripts, potentially exposing your API keys if you’re not extremely careful. This is a significant security risk.</p></li>
</ul>
<ol start="2" type="1">
<li>Scope and Purpose:</li>
</ol>
<ul>
<li><p>.Renviron: The primary purpose of .Renviron is to define environment variables. It’s a dedicated configuration file for this specific task. Keeping environment variable definitions separate from other R startup code makes things cleaner and easier to manage.</p></li>
<li><p>.Rprofile: The .Rprofile file is more general-purpose. It’s used for setting various R options, loading packages, defining functions, and other startup configurations. Mixing environment variable definitions with other startup code in .Rprofile can make the file less organized and harder to maintain.</p></li>
</ul>
<ol start="3" type="1">
<li>Best Practices:</li>
</ol>
<p>It’s a widely accepted best practice to store sensitive information like API keys in .Renviron. This follows the principle of least privilege, where you only give your R scripts access to the environment variables they need, without giving them direct access to the file where those variables are defined.</p>
<ol start="4" type="1">
<li>How R Reads These Files:</li>
</ol>
<p>R reads .Renviron very early in the startup process. The environment variables are then set before any R code is executed. R reads .Rprofile later in the startup process. This means that any environment variables set in .Rprofile are set after the initial environment has been established (including those from .Renviron).</p>
<ol start="5" type="1">
<li>Practical Example:</li>
</ol>
<p>Imagine you have an API key for a weather service.</p>
<p>.Renviron (Recommended):</p>
<p><code>WEATHER_API_KEY=your_actual_api_key</code></p>
<p>.Rprofile (Less Secure):</p>
<p><code>Sys.setenv(WEATHER_API_KEY = "your_actual_api_key") # Risk of exposure!</code></p>
<p>In the .Renviron example, your R scripts can access the WEATHER_API_KEY environment variable, but they cannot directly access the .Renviron file itself. In the .Rprofile example, there’s a risk that your R code could accidentally read and print the contents of the .Rprofile file, potentially revealing the API key.</p>
<p>In summary: While you can technically set environment variables in .Rprofile, it’s strongly recommended to use .Renviron for security and organization reasons, especially when dealing with sensitive information like API keys. This separation of concerns makes your R projects more secure, reproducible, and easier to manage.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="api-key-management-environment-variables-1" class="slide level2">
<h2>API Key Management (Environment Variables)</h2>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href=""></a><span class="co"># Project/Script Title: Setting Global Parameters and Resolving Conflicts</span></span>
<span id="cb8-2"><a href=""></a><span class="co"># Author: N.F. Parsons</span></span>
<span id="cb8-3"><a href=""></a><span class="co"># Date: 2025-02-05</span></span>
<span id="cb8-4"><a href=""></a><span class="co"># Email: nathan.parsons@multco.us</span></span>
<span id="cb8-5"><a href=""></a><span class="co"># Description: This script sets global parameters, resolves conflicts between packages,</span></span>
<span id="cb8-6"><a href=""></a><span class="co">#              loads fonts, sets API keys, and sets a random seed for reproducibility.</span></span>
<span id="cb8-7"><a href=""></a></span>
<span id="cb8-8"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb8-9"><a href=""></a><span class="co"># 1. Setup/Dependencies</span></span>
<span id="cb8-10"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb8-11"><a href=""></a></span>
<span id="cb8-12"><a href=""></a><span class="co"># Install packages if not already installed (using a helper function)</span></span>
<span id="cb8-13"><a href=""></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">"pacman"</span>)) {</span>
<span id="cb8-14"><a href=""></a>  <span class="fu">install.packages</span>(<span class="st">"pacman"</span>, <span class="at">repos =</span> <span class="st">"https://cran.rstudio.org"</span>)</span>
<span id="cb8-15"><a href=""></a>}</span>
<span id="cb8-16"><a href=""></a><span class="fu">library</span>(pacman)</span>
<span id="cb8-17"><a href=""></a></span>
<span id="cb8-18"><a href=""></a><span class="fu">p_load</span>(<span class="st">"magick"</span>, <span class="st">"janitor"</span>, <span class="st">"dplyr"</span>, <span class="st">"tidycensus"</span>, <span class="st">"sysfonts"</span>, <span class="st">"rscopus"</span>, </span>
<span id="cb8-19"><a href=""></a>       <span class="st">"gtsummary"</span>, <span class="st">"flextable"</span>, <span class="st">"showtext"</span>, <span class="st">"ggmap"</span>, <span class="st">"stringr"</span>)</span>
<span id="cb8-20"><a href=""></a></span>
<span id="cb8-21"><a href=""></a></span>
<span id="cb8-22"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb8-23"><a href=""></a><span class="co"># 2. Global Parameters/Constants</span></span>
<span id="cb8-24"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb8-25"><a href=""></a></span>
<span id="cb8-26"><a href=""></a><span class="co"># API Keys (Store securely, ideally in environment variables)</span></span>
<span id="cb8-27"><a href=""></a>elsevier_api_key <span class="ot">&lt;-</span> <span class="fu">Sys.getenv</span>(<span class="st">"ELSEVIER_API_KEY"</span>)  <span class="co"># Get from environment</span></span>
<span id="cb8-28"><a href=""></a>census_api_key <span class="ot">&lt;-</span> <span class="fu">Sys.getenv</span>(<span class="st">"CENSUS_API_KEY"</span>) <span class="co"># Get from environment</span></span>
<span id="cb8-29"><a href=""></a>google_api_key <span class="ot">&lt;-</span> <span class="fu">Sys.getenv</span>(<span class="st">"GOOGLE_API_KEY"</span>) <span class="co"># Get from environment</span></span>
<span id="cb8-30"><a href=""></a></span>
<span id="cb8-31"><a href=""></a><span class="co"># Check if API keys are set (important for security)</span></span>
<span id="cb8-32"><a href=""></a><span class="cf">if</span> (elsevier_api_key <span class="sc">==</span> <span class="st">""</span>) {</span>
<span id="cb8-33"><a href=""></a>  <span class="fu">stop</span>(<span class="st">"Elsevier API key not found. Set the ELSEVIER_API_KEY environment variable."</span>)</span>
<span id="cb8-34"><a href=""></a>}</span>
<span id="cb8-35"><a href=""></a><span class="cf">if</span> (census_api_key <span class="sc">==</span> <span class="st">""</span>) {</span>
<span id="cb8-36"><a href=""></a>  <span class="fu">stop</span>(<span class="st">"Census API key not found. Set the CENSUS_API_KEY environment variable."</span>)</span>
<span id="cb8-37"><a href=""></a>}</span>
<span id="cb8-38"><a href=""></a><span class="cf">if</span> (google_api_key <span class="sc">==</span> <span class="st">""</span>) {</span>
<span id="cb8-39"><a href=""></a>  <span class="fu">stop</span>(<span class="st">"Google API key not found. Set the GOOGLE_API_KEY environment variable."</span>)</span>
<span id="cb8-40"><a href=""></a>}</span>
<span id="cb8-41"><a href=""></a></span>
<span id="cb8-42"><a href=""></a><span class="co"># GIS repo (set for your own use)</span></span>
<span id="cb8-43"><a href=""></a>gis_repo <span class="ot">&lt;-</span> <span class="fu">Sys.getenv</span>(<span class="st">"GIS_SHAPEFILE_REPO"</span>)</span>
<span id="cb8-44"><a href=""></a></span>
<span id="cb8-45"><a href=""></a><span class="co"># Check if GIS repo is set</span></span>
<span id="cb8-46"><a href=""></a><span class="cf">if</span> (gis_repo <span class="sc">==</span> <span class="st">""</span>) {</span>
<span id="cb8-47"><a href=""></a>  <span class="fu">stop</span>(<span class="st">"GIS shapefile repository not found. Set the GIS_SHAPEFILE_REPO environment variable using the following code: `gis_repo &lt;- 'path/to/shapefiles/folder', or add the following code to your .Rprofile using `file.edit(file.path('~', '.Rprofile'))`: `Sys.setenv(DATA_REPO = 'path/to/shapefiles/folder')`"</span>)</span>
<span id="cb8-48"><a href=""></a>}</span>
<span id="cb8-49"><a href=""></a></span>
<span id="cb8-50"><a href=""></a><span class="co"># Data repo (set for your own use)</span></span>
<span id="cb8-51"><a href=""></a>data_repo <span class="ot">&lt;-</span> <span class="fu">Sys.getenv</span>(<span class="st">"DATA_REPO"</span>)</span>
<span id="cb8-52"><a href=""></a></span>
<span id="cb8-53"><a href=""></a><span class="co"># Check if GIS repo is set</span></span>
<span id="cb8-54"><a href=""></a><span class="cf">if</span> (data_repo <span class="sc">==</span> <span class="st">""</span>) {</span>
<span id="cb8-55"><a href=""></a>  <span class="fu">stop</span>(<span class="st">"Data repository not found. Set the DATA_REPO environment variable using the following code: `data_repo &lt;- 'path/to/data/folder'`, or add the following code to your .Rprofile using `file.edit(file.path('~', '.Rprofile'))`: `Sys.setenv(DATA_REPO = 'path/to/data/folder')`"</span>)</span>
<span id="cb8-56"><a href=""></a>}</span>
<span id="cb8-57"><a href=""></a></span>
<span id="cb8-58"><a href=""></a><span class="co"># Other Global Settings</span></span>
<span id="cb8-59"><a href=""></a><span class="fu">set.seed</span>(<span class="dv">13</span>) <span class="co"># Random seed for reproducibility</span></span>
<span id="cb8-60"><a href=""></a><span class="fu">options</span>(<span class="at">scipen =</span> <span class="dv">9999</span>) <span class="co"># Large number for scientific notation preference</span></span>
<span id="cb8-61"><a href=""></a></span>
<span id="cb8-62"><a href=""></a></span>
<span id="cb8-63"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb8-64"><a href=""></a><span class="co"># 3. Themes and Table Defaults</span></span>
<span id="cb8-65"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb8-66"><a href=""></a></span>
<span id="cb8-67"><a href=""></a><span class="co"># gtsummary Themes</span></span>
<span id="cb8-68"><a href=""></a>gtsummary<span class="sc">::</span><span class="fu">theme_gtsummary_journal</span>(<span class="at">journal =</span> <span class="st">"jama"</span>)</span>
<span id="cb8-69"><a href=""></a>gtsummary<span class="sc">::</span><span class="fu">theme_gtsummary_compact</span>()</span>
<span id="cb8-70"><a href=""></a></span>
<span id="cb8-71"><a href=""></a><span class="co"># flextable Defaults (Font check!)</span></span>
<span id="cb8-72"><a href=""></a>flextable<span class="sc">::</span><span class="fu">set_flextable_defaults</span>(</span>
<span id="cb8-73"><a href=""></a>  <span class="at">table.layout =</span> <span class="st">"autofit"</span>, </span>
<span id="cb8-74"><a href=""></a>  <span class="at">font.size =</span> <span class="dv">10</span>, </span>
<span id="cb8-75"><a href=""></a>  <span class="at">font.family =</span> <span class="st">"Times New Roman"</span>, <span class="co"># Ensure this font is available!</span></span>
<span id="cb8-76"><a href=""></a>  <span class="at">padding.top =</span> <span class="dv">0</span>, </span>
<span id="cb8-77"><a href=""></a>  <span class="at">padding.bottom =</span> <span class="dv">0</span></span>
<span id="cb8-78"><a href=""></a>)</span>
<span id="cb8-79"><a href=""></a></span>
<span id="cb8-80"><a href=""></a></span>
<span id="cb8-81"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb8-82"><a href=""></a><span class="co"># 4. Font Loading</span></span>
<span id="cb8-83"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb8-84"><a href=""></a></span>
<span id="cb8-85"><a href=""></a><span class="co"># Enable showtext for custom fonts</span></span>
<span id="cb8-86"><a href=""></a>showtext<span class="sc">::</span><span class="fu">showtext_auto</span>() </span>
<span id="cb8-87"><a href=""></a></span>
<span id="cb8-88"><a href=""></a></span>
<span id="cb8-89"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb8-90"><a href=""></a><span class="co"># 5. API Key Registration</span></span>
<span id="cb8-91"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb8-92"><a href=""></a></span>
<span id="cb8-93"><a href=""></a><span class="co"># Register API keys (after setting them as environment variables)</span></span>
<span id="cb8-94"><a href=""></a></span>
<span id="cb8-95"><a href=""></a><span class="co"># tidycensus</span></span>
<span id="cb8-96"><a href=""></a>tidycensus<span class="sc">::</span><span class="fu">census_api_key</span>(census_api_key, <span class="at">overwrite =</span> <span class="cn">TRUE</span>) </span>
<span id="cb8-97"><a href=""></a></span>
<span id="cb8-98"><a href=""></a><span class="co"># Elsevier </span></span>
<span id="cb8-99"><a href=""></a>rscopus<span class="sc">::</span><span class="fu">set_api_key</span>(elsevier_api_key)  </span>
<span id="cb8-100"><a href=""></a></span>
<span id="cb8-101"><a href=""></a><span class="co"># Google Maps </span></span>
<span id="cb8-102"><a href=""></a>ggmap<span class="sc">::</span><span class="fu">register_google</span>(<span class="at">key =</span> google_api_key) </span>
<span id="cb8-103"><a href=""></a></span>
<span id="cb8-104"><a href=""></a></span>
<span id="cb8-105"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb8-106"><a href=""></a><span class="co"># 6.  Session Information</span></span>
<span id="cb8-107"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb8-108"><a href=""></a></span>
<span id="cb8-109"><a href=""></a><span class="fu">sessionInfo</span>()</span>
<span id="cb8-110"><a href=""></a></span>
<span id="cb8-111"><a href=""></a></span>
<span id="cb8-112"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb8-113"><a href=""></a><span class="co"># 7. Confirmation output</span></span>
<span id="cb8-114"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb8-115"><a href=""></a></span>
<span id="cb8-116"><a href=""></a>stringr<span class="sc">::</span><span class="fu">str_glue</span>(<span class="st">"Options set. </span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb8-117"><a href=""></a></span>
<span id="cb8-118"><a href=""></a></span>
<span id="cb8-119"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span>
<span id="cb8-120"><a href=""></a><span class="co"># End of Script</span></span>
<span id="cb8-121"><a href=""></a><span class="co"># -----------------------------------------------------------------------------</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="reproducibility-best-practices" class="slide level2">
<h2>Reproducibility Best Practices</h2>
<ul>
<li>Use <code>here</code> for file paths.</li>
<li>Manage packages with <code>pacman</code>.</li>
<li>Set a random seed (<code>set.seed()</code>).</li>
<li>Store API keys and other global settings in environment variables.</li>
<li>Version control (Git): Essential for tracking changes and collaboration.</li>
<li>Document your code: Clear comments and explanations.</li>
<li>Use Quarto for reproducible reports and presentations (like this one!).</li>
</ul>
<aside class="notes">
<p>Emphasize the cumulative effect of these practices. Mention the benefits of Git and good documentation.</p>
<p>So, we’ve covered a lot of ground in terms of individual best practices. But the real power comes from combining all of these techniques. It’s the <em>cumulative effect</em> of using <code>here</code>, managing packages with <code>pacman</code>, setting a random seed, securing API keys, and so on, that truly makes your research reproducible. Each of these practices reinforces the others, creating a robust and reliable workflow.</p>
<p>Think of it like building a house. You wouldn’t just focus on the roof or the foundation; you need both, and all the other structural elements in between, to have a solid, stable building. Similarly, with reproducible research, you need all these best practices working together to create a reliable and verifiable analysis.</p>
<p>Now, there are two more crucial elements I want to touch on: version control with Git and good documentation.</p>
<p><strong>Version Control (Git):</strong> Imagine making changes to your code and then realizing you’ve broken something. With Git, you can easily revert to previous versions of your code, track changes, and collaborate with others seamlessly. Git is like a time machine for your project, allowing you to go back and forth between different versions, experiment without fear, and understand the evolution of your analysis. It’s absolutely essential for any project of significant complexity.</p>
<p><strong>Good Documentation:</strong> Even with the best project structure and code, if it’s not well documented, it can be difficult for others (or even your future self) to understand what you did. Clear comments in your code, a well-written README file explaining the project structure and workflow, and using tools like Quarto for creating reproducible reports are all vital aspects of good documentation. Think of it as leaving a clear trail of breadcrumbs for anyone who wants to follow in your footsteps and reproduce your work.</p>
<p>And, of course, we’re using Quarto right now to create this very presentation! Quarto is itself a powerful tool for reproducibility, as it allows you to weave together narrative text, code, and results into a single, cohesive document.</p>
<p>By combining all these best practices, you’re not just making your research reproducible; you’re also making it more robust, easier to understand, and more collaborative. It’s an investment in the quality and longevity of your work.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="sharing-reproducible-research" class="slide level2">
<h2>Sharing Reproducible Research</h2>
<ul>
<li><strong>Code Repositories (GitHub, GitLab, Bitbucket):</strong>
<ul>
<li>Share your code, data, and documentation in a public repository.</li>
<li>Allows others to easily access, review, and contribute to your work.</li>
<li>Provides version control and issue tracking.</li>
</ul></li>
</ul>
<aside class="notes">
<p>Now that we’ve established how to create reproducible research, let’s explore how to share it with the world. There are many excellent tools and platforms available to help you disseminate your work and make it truly reproducible by others.</p>
<p><strong>Code Repositories:</strong> Platforms like GitHub, GitLab, and Bitbucket are essential for sharing your code, data, and documentation. By creating a public repository, you allow anyone to access, review, and even contribute to your project. These platforms also provide built-in version control with Git, making it easy to track changes and collaborate.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="sharing-reproducible-research-1" class="slide level2">
<h2>Sharing Reproducible Research</h2>
<ul>
<li><strong>R Packages:</strong>
<ul>
<li>Package your analysis into an R package.</li>
<li>Makes it easy for others to install and use your code.</li>
<li>Provides a standardized structure for documentation and testing.</li>
</ul></li>
</ul>
<aside class="notes">
<p><strong>R Packages:</strong> If your analysis is well-defined and could be useful to others, consider packaging it as an R package. This makes it incredibly easy for others to install and use your code. R packages also enforce a standardized structure for documentation and testing, further enhancing reproducibility.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="sharing-reproducible-research-2" class="slide level2">
<h2>Sharing Reproducible Research</h2>
<ul>
<li><strong>Workflow Platforms (e.g., GitHub Actions, GitLab CI/CD):</strong>
<ul>
<li>Automate the execution of your analysis.</li>
<li>Ensures that your code runs consistently and reliably.</li>
<li>Can be used to generate reports or dashboards.</li>
</ul></li>
</ul>
<aside class="notes">
<p><strong>Workflow Platforms:</strong> Services like GitHub Actions and GitLab CI/CD can automate the execution of your analysis. This ensures that your code runs consistently and can be used to generate reports, dashboards, or other outputs on a regular basis.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="sharing-reproducible-research-3" class="slide level2">
<h2>Sharing Reproducible Research</h2>
<ul>
<li><strong>Containers (e.g., Docker, Singularity):</strong>
<ul>
<li>Package your analysis environment along with your code and data.</li>
<li>Guarantees that others can run your code with the same dependencies.</li>
<li>Provides platform independence.</li>
</ul></li>
</ul>
<aside class="notes">
<p><strong>Containers:</strong> Tools like Docker and Singularity allow you to package your entire analysis environment, including your code, data, and all dependencies, into a single container. This guarantees that others can run your code with the exact same setup, regardless of their operating system or local environment.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="sharing-reproducible-research-4" class="slide level2">
<h2>Sharing Reproducible Research</h2>
<ul>
<li><strong>Reproducible Research Platforms (e.g., Code Ocean, Whole Tale):</strong>
<ul>
<li>Provide dedicated platforms for sharing and reproducing research.</li>
<li>Offer features like version control, environment capture, and interactive execution.</li>
</ul></li>
</ul>
<aside class="notes">
<p><strong>Reproducible Research Platforms:</strong> Platforms like Code Ocean and Whole Tale are specifically designed for sharing and reproducing research. They offer features like version control, environment capture, and interactive execution, making it easy for others to explore and validate your work.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="sharing-reproducible-research-5" class="slide level2">
<h2>Sharing Reproducible Research</h2>
<ul>
<li><strong>Preprint Servers (e.g., arXiv, bioRxiv):</strong>
<ul>
<li>Share your findings early and get feedback.</li>
<li>Link to your code repository for full reproducibility.</li>
</ul></li>
</ul>
<aside class="notes">
<p><strong>Preprint Servers:</strong> If you want to share your findings early and get feedback, consider posting a preprint on servers like arXiv or bioRxiv. Make sure to link to your code repository so that others can fully reproduce your analysis.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="sharing-reproducible-research-6" class="slide level2">
<h2>Sharing Reproducible Research</h2>
<ul>
<li><strong>Archived Files (.zip,.tar.gz, etc.):</strong>
<ul>
<li>Can be used to share a snapshot of your project.</li>
<li><strong>Limitations:</strong> Lack of version control, difficulty in tracking changes, and potential for environment inconsistencies. Best used for final releases or when other options are not feasible. Should include clear instructions for setup and reproduction.</li>
</ul></li>
</ul>
<aside class="notes">
<p><strong>Archived Files (.zip,.tar.gz, etc.):</strong> While code repositories, R packages, and other methods are generally preferred for sharing reproducible research, sometimes you might need to share your project as a simple archive, like a <code>.zip</code> file or a <code>.tar.gz</code> file. This can be useful for sharing a snapshot of your project at a specific point in time, perhaps for a final release or when other options are not feasible.</p>
<p>However, it’s important to be aware of the limitations of sharing research as a simple archive. First, <code>.zip</code> files lack version control. It’s difficult to track changes made to the project over time. Second, it can be challenging for others to reproduce your work if the archive doesn’t include clear instructions for setting up the environment and running the code. There’s also a higher risk of environment inconsistencies, as the archive might not capture all the dependencies needed to run the analysis.</p>
<p>If you do choose to share your research as an archive, make sure to include a comprehensive README file with detailed instructions for setting up the required environment, installing packages, and running the analysis. Clearly specify the R version and any other software dependencies. The more detail you provide, the easier it will be for others to reproduce your work. In general, though, consider code repositories or other methods whenever possible, as they offer better support for reproducibility and collaboration.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="conclusion" class="slide level2">
<h2>Conclusion</h2>
<ul>
<li>The <a href="https://rfortherestofus.com/2021/08/rstudio-project-structure/">“RStudio Project Structure” blog post on “R for the Rest of Us”</a>. This is an excellent starting point and the inspiration for much of what we’ve discussed today.</li>
<li>The documentation for <a href="https://here.r-lib.org/">the <code>here</code> package</a>. <code>here</code> is a powerful tool, and its documentation provides more advanced usage examples.</li>
<li><a href="https://github.com/trinker/pacman">The <code>pacman</code> package documentation</a>. Learn more about <code>pacman</code>’s features and how it can streamline your package management.</li>
</ul>
<aside class="notes">
<p>Offer further resources for learning more about reproducible research. End with a call to action.</p>
<p>We’ve covered a lot of ground today, from setting up a project with <code>here</code> to managing packages with <code>pacman</code>, handling global parameters and API keys, and exploring various ways to share your reproducible work. Let’s quickly recap the key benefits of adopting these practices:</p>
<ul>
<li>Improved organization and readability of your code.</li>
<li>Enhanced reproducibility of your analyses.</li>
<li>Easier collaboration with colleagues.</li>
<li>Increased confidence in your results.</li>
<li>Greater impact of your research.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="conclusion-1" class="slide level2">
<h2>Conclusion</h2>
<ul>
<li><a href="https://www.routledge.com/Reproducible-Research-with-R-and-RStudio/Gandrud/p/book/9780367143985">The Reproducible Research with R book by Christopher Gandrud</a>. This is a comprehensive guide to reproducible research practices.</li>
<li><a href="https://www.r-bloggers.com/2022/02/data-analysis-reproducibility-with-r-and-rstudio/">The “Reproducible Research” article on the R-bloggers website</a>.</li>
</ul>
<aside class="notes">
<p>I strongly encourage you to incorporate these techniques into your own R projects. They might seem like extra steps at first, but they will save you time and headaches in the long run, and most importantly, they will make your research more reliable and credible.</p>
<p>Remember, reproducible research is not just a set of techniques; it’s a mindset. It’s about being meticulous, transparent, and making your work accessible and verifiable by others. By embracing this mindset and using the tools and practices we’ve discussed, you can elevate the quality and impact of your research.</p>
<p>Thank you.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>

</section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="Project Management_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="Project Management_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="Project Management_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="Project Management_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="Project Management_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="Project Management_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="Project Management_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="Project Management_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="Project Management_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="Project Management_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>